# O que é path traversal?
Path traversal também é conhecido como directory traversal. Essas vulnerabilidades permitem que o atacante leia arquivos arbitrários no servidor que está executando uma aplicação. Isso pode incluir:
- Dados e código da aplicação
- Credenciais para sistemas de back-end
- Arquivos sensíveis de sistemas operacionais

Em alguns casos, um atacante pode ser capaz de escrever arquivos arbitrários no servidor, permitindo-os a modificarem dados ou comportamentos de aplicações e, em casos extremos, tomar controle total do servidor

# Lendo arquivos arbitrários via path traversal
Imagine uma aplicação de shopping que apresenta imagens de itens à venda. O snippet abaixo pode carregar uma imagem utilizando HTML:
```html
<img src="/loadImage?filename=218.png">
```

A URL *loadImage* recebe um parâmetro *filename* e retorna o conteúdo do arquivo especificado. Os arquivos de imagem estão armazenados na localidade */var/www/images/*. Para retornar uma imagem, a aplicação adiciona o arquivo requisitado ao seu diretório base e utiliza uma API de sistema de arquivos para ler o conteúdo do arquivo. Resumidamente, a aplicação lê do seguinte file path:
```js
/var/www/images/218.png
```

A aplicação implementa nenhuma defesa contra ataques path traversal. Por isso, um atacante pode enviar uma requisição pra seguinte URL para obter o arquivo */etc/passwd* do servidor:
```html
https://insecure-website.com/loadImage?filename=../../../etc/passwd
```

Isso faz com que a aplicação leia o seguinte arquivo:
```js
/var/www/images/../../../etc/passwd
```

A sequência *../* é válida num caminho de arquivo e leva a um nível acima da estrutura de diretórios do servidor. Os três consecutivos *../* de */var/www/images/* fazem com que cheguemos na raiz do sistema de arquivos e que o arquivo a ser realmente lido é:
```js
/etc/passwd
```

Em sistemas baseados em Unix, este é um arquivo padrão que contém detalhes dos usuários que estão registrados no servidor, mas um atacante pode obter quaisquer outros arquivos arbitrários utilizando a mesma técnica.

No Windows, ambos *../* e ..\ são sequências transversais de diretórios válidos. O exemplo a seguir é um ataque equivalente contra um servidor baseado em Windows:
```js
https://insecure-website.com/loadImage?filename=..\..\..\windows\win.ini
```

# Laboratório
https://www.youtube.com/watch?v=XhieEh9BlGc